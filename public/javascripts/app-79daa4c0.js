!function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.require){var e={},r={},o=function(t,e){return{}.hasOwnProperty.call(t,e)},n=function(t,e){var r,o,n=[];r=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var i=0,a=r.length;a>i;i++)o=r[i],".."===o?n.pop():"."!==o&&""!==o&&n.push(o);return n.join("/")},i=function(t){return t.split("/").slice(0,-1).join("/")},a=function(e){return function(r){var o=i(e),a=n(o,r);return t.require(a,e)}},s=function(t,e){var o={id:t,exports:{}};return r[t]=o,e(o.exports,a(t),o),o.exports},c=function(t,i){var a=n(t,".");if(null==i&&(i="/"),o(r,a))return r[a].exports;if(o(e,a))return s(a,e[a]);var c=n(a,"./index");if(o(r,c))return r[c].exports;if(o(e,c))return s(c,e[c]);throw new Error('Cannot find module "'+t+'" from "'+i+'"')},l=function(t,r){if("object"==typeof t)for(var n in t)o(t,n)&&(e[n]=t[n]);else e[t]=r},p=function(){var t=[];for(var r in e)o(e,r)&&t.push(r);return t};t.require=c,t.require.define=l,t.require.register=l,t.require.list=p,t.require.brunch=!0}}(),require.register("application",function(t,e,r){var o;o={initialize:function(){return e("lib/protect_from_csrf"),e("views/main"),e("router")}},r.exports=o}),require.register("collections/contacts",function(t,e,r){var o,n={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.url="/contacts",r.prototype.model=e("models/contact"),r.prototype.comparator="name",r}(Backbone.Collection),r.exports=new o}),require.register("initialize",function(t,e){var r;r=e("application"),$(document).ready(function(){return r.initialize(),Backbone.history.start({pushState:!1})})}),require.register("lib/composite_view",function(t,e,r){var o,n={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.children=_([])},e.prototype.renderChild=function(t){return this.children.push(t),t.parent=this,t.render()},e.prototype.remove=function(){return this.trigger("remove"),e.__super__.remove.call(this),this._removeChildren(),this._removeFromParent(),this},e.prototype.swapped=function(){return this.trigger("swapped"),this},e.prototype._removeChild=function(t){var e;return e=this.children.indexOf(t),this.children.splice(e,1)},e.prototype._removeChildren=function(){return _.each(this.children.clone(),function(t){return t.remove()})},e.prototype._removeFromParent=function(){return this.parent?this.parent._removeChild(this):void 0},e}(Backbone.View),r.exports=o}),require.register("lib/protect_from_csrf",function(t,e){var r;r=e("session"),Backbone._sync=Backbone.sync,Backbone.sync=function(t,e,o){var n;return n=o.beforeSend,o.beforeSend=function(t){return t.setRequestHeader("X-CSRF-Token",r.get("csrf_token")),n?n.apply(this,arguments):void 0},Backbone._sync(t,e,o)}}),require.register("lib/states",function(t,e,r){var o;o=[{label:"AL - Alabama",value:"AL"},{label:"AK - Alaska",value:"AK"},{label:"AZ - Arizona",value:"AZ"},{label:"AR - Arkansas",value:"AR"},{label:"CA - California",value:"CA"},{label:"CO - Colorado",value:"CO"},{label:"CT - Connecticut",value:"CT"},{label:"DC - District of Columbia",value:"DC"},{label:"DE - Delaware",value:"DE"},{label:"FL - Florida",value:"FL"},{label:"GA - Georgia",value:"GA"},{label:"HI - Hawaii",value:"HI"},{label:"ID - Idaho",value:"ID"},{label:"IL - Illinois",value:"IL"},{label:"IN - Indiana",value:"IN"},{label:"IA - Iowa",value:"IA"},{label:"KS - Kansas",value:"KS"},{label:"KY - Kentucky",value:"KY"},{label:"LA - Louisiana",value:"LA"},{label:"ME - Maine",value:"ME"},{label:"MD - Maryland",value:"MD"},{label:"MA - Massachusetts",value:"MA"},{label:"MI - Michigan",value:"MI"},{label:"MN - Minnesota",value:"MN"},{label:"MS - Mississippi",value:"MS"},{label:"MO - Missouri",value:"MO"},{label:"MT - Montana",value:"MT"},{label:"NE - Nebraska",value:"NE"},{label:"NV - Nevada",value:"NV"},{label:"NH - New Hampshire",value:"NH"},{label:"NJ - New Jersey",value:"NJ"},{label:"NM - New Mexico",value:"NM"},{label:"NY - New York",value:"NY"},{label:"NC - North Carolina",value:"NC"},{label:"ND - North Dakota",value:"ND"},{label:"OH - Ohio",value:"OH"},{label:"OK - Oklahoma",value:"OK"},{label:"OR - Oregon",value:"OR"},{label:"PA - Pennsylvania",value:"PA"},{label:"RI - Rhode Island",value:"RI"},{label:"SC - South Carolina",value:"SC"},{label:"SD - South Dakota",value:"SD"},{label:"TN - Tennessee",value:"TN"},{label:"TX - Texas",value:"TX"},{label:"UT - Utah",value:"UT"},{label:"VT - Vermont",value:"VT"},{label:"VA - Virginia",value:"VA"},{label:"WA - Washington",value:"WA"},{label:"WV - West Virginia",value:"WV"},{label:"WI - Wisconsin",value:"WI"},{label:"WY - Wyoming",value:"WY"}],r.exports=o}),require.register("lib/swapping_router",function(t,e,r){var o,n={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.execute=function(t,e){return this.params=this._parseParams(e.pop()),null!=t?t.apply(this,e):void 0},e.prototype.navigate=function(t,r){var o;return null==r&&(r={}),o=new URI(t.replace("#","")),null!=r.params&&o.query(r.params),e.__super__.navigate.call(this,"#"+o.toString(),_.omit(r,"params"))},e.prototype.swap=function(t){var e;return null!=(e=this.currentView)&&e.remove(),this.currentView=t,this.$el.html(this.currentView.render().el),this.currentView.swapped(),this},e.prototype._parseParams=function(t){return t?new URI("?"+t).query(!0):{}},e}(Backbone.Router),r.exports=o}),require.register("models/address",function(t,e,r){var o,n={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e}(Backbone.UndoableModel),r.exports=o}),require.register("models/contact",function(t,e,r){var o,n,i={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=e("models/address"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.urlRoot="/contacts",e.prototype.relations=[{type:"one",key:"address",relatedModel:function(){return o}}],e.prototype.validation={name:{required:!0,msg:"Can't be blank"},email:{required:!1,pattern:"email"}},e.prototype.choose=function(){var t;return null!=(t=this.collection)&&t.each(function(t){return t.set({active:!1})}),this.set({active:!0})},e}(Backbone.UndoableModel),r.exports=n}),require.register("router",function(t,e,r){var o,n,i,a,s,c,l={}.hasOwnProperty,p=function(t,e){function r(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=e("models/contact"),n=e("views/contact"),i=e("views/edit"),s=e("lib/swapping_router"),c=e("collections/contacts"),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.execute=function(t,r){return this.$el=$("#contact_wrapper"),c.isEmpty()?c.fetch({success:function(o){return function(){return e.__super__.execute.call(o,t,r)}}(this)}):e.__super__.execute.call(this,t,r)},e.prototype.routes={"":"home",contacts:"first","contacts/new":"new_contact","contacts/:id":"show","contacts/:id/edit":"edit"},e.prototype.edit=function(t){return this._edit(c.get(t))},e.prototype.first=function(){return this._show(c.first())},e.prototype.home=function(){return this.navigate("#/contacts",{trigger:!0,params:this.params})},e.prototype.new_contact=function(){return this._edit(new o)},e.prototype.show=function(t){return this._show(c.get(t))},e.prototype._edit=function(t){return t.choose(),this.swap(new i({model:t,params:this.params}))},e.prototype._show=function(t){return t.choose(),this.swap(new n({model:t,params:this.params}))},e}(s),r.exports=new a}),require.register("session",function(t,e,r){var o,n,i={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.url="/session",e}(Backbone.Model),n=new o,n.fetch(),r.exports=n}),require.register("templates/card",function(t,e,r){var o=function(){var t=[];return t.push('<span id="arrow"><i class="fa fa-chevron-right"></i></span><img id="avatar" width="32" height="32"/><span id="name"></span>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("templates/contact",function(t,e,r){var o=function(){var t=[];return t.push('<div class="page-header"><h1><span id="name"></span><span id="edit" data-toggle="tooltip" title="Edit contact"><i class="fa fa-pencil"></i></span></h1></div><div class="row"><div class="col-xs-4"><img id="avatar"/></div><div id="details" class="col-xs-8"><div class="row"><div class="col-xs-4"><p class="contact-label">Sex</p><p id="sex"></p></div><div class="col-xs-4"><p class="contact-label">Age</p><p id="age"></p></div><div class="col-xs-4"><p class="contact-label">Birthday</p><p id="birthday"></p></div></div><div class="row"><div class="col-xs-12"><p class="contact-label">Address</p><p><span id="street"></span><br/><span id="city"></span><span id="state"></span>&nbsp;&nbsp;<span id="postcode"></span></p></div></div><div class="row"><div class="col-xs-4"><p class="contact-label">Phone</p><p id="phone"></p></div><div class="col-xs-8"><p class="contact-label">Email</p><p id="email"></p></div></div></div></div>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("templates/contacts",function(t,e,r){var o=function(){var t=[];return t.push('<div id="new_contact_wrapper"><button id="new" class="btn btn-success btn-block"><i class="fa fa-plus"></i> Create new contact</button></div>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("templates/edit",function(t,e,r){var o=function(){var t=[];return t.push('<form><div class="page-header"><div class="form-group name has-feedback"><input id="name" type="text" placeholder="Contact name" class="input-lg form-control"/><span class="form-control-feedback"></span></div></div><div class="row"><div class="col-xs-4"><img id="avatar"/></div><div id="details" class="col-xs-8"><div class="row"><div class="form-group col-xs-4"><p class="contact-label">Sex</p><select id="sex" class="form-control"></select></div><div class="form-group col-xs-4"><p class="contact-label">Age</p><p>???</p></div><div class="form-group col-xs-4"><p class="contact-label">Birthday</p><input id="birthday" type="date" placeholder="YYYY-MM-DD" class="form-control"/></div></div><div class="row"><div class="col-xs-12"><p class="contact-label">Address</p><div class="row"><div class="form-group col-xs-6"><input id="street" type="text" placeholder="Street address" class="form-control"/></div></div><div class="row"><div class="form-group col-xs-4"><input id="city" type="text" placeholder="City" class="form-control"/></div><div class="form-group col-xs-2"><select id="state" class="form-control"></select></div><div class="form-group col-xs-3"><input id="postcode" type="text" placeholder="Zip code" class="form-control"/></div></div></div></div><div class="row"><div class="form-group col-xs-4"><p class="contact-label">Phone</p><input id="phone" type="text" placeholder="ex: 888-867-5309" class="form-control"/></div><div class="form-group email has-feedback col-xs-8"><p class="contact-label">Email</p><input id="email" type="text" placeholder="ex: yourname@email.com" class="form-control"/><span class="form-control-feedback"></span></div></div><div class="row"><div class="form-group col-xs-12"><button id="delete" type="button" class="btn btn-danger">Delete contact</button><button id="submit" type="submit" class="btn btn-primary">Save contact</button><button id="cancel" type="button" class="btn btn-default">Cancel</button></div></div></div></div></form>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("templates/main",function(t,e,r){var o=function(){var t=[];return t.push('<nav class="navbar navbar-default navbar-static-top"><div class="container-fluid"><div class="navbar-header"><a href="#/contacts" class="navbar-brand"><i class="fa fa-sort-alpha-asc"></i> The Rolodexx</a></div><p class="navbar-text navbar-right">The way your grandma used to remember things.</p></div></nav><div id="content" class="container-fluid"><div class="row"><div id="contacts" class="col-xs-3"></div><div id="contact_wrapper" class="col-xs-9"></div></div></div>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/card",function(t,e,r){var o,n,i,a={}.hasOwnProperty,s=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=e("lib/composite_view"),i=e("router"),o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return s(r,t),r.prototype.template=e("templates/card"),r.prototype.className="card",r.prototype.initialize=function(t){return r.__super__.initialize.call(this,t),this.listenTo(this.model,"remove",this.remove)},r.prototype.bindings={":el":{attributes:[{name:"class",observe:"active",onGet:function(t){return t?"active":""}}]},"#avatar":{attributes:[{name:"src",observe:"gravatar_hash",onGet:function(t){return"http://www.gravatar.com/avatar/"+t+"?d=mm&s=32"}}]},"#name":"name"},r.prototype.events={click:"_showContact"},r.prototype.render=function(){return this.$el.html(this.template()),this.stickit(),this},r.prototype._showContact=function(){return i.navigate("#"+this.model.url(),{trigger:!0})},r}(n),r.exports=o}),require.register("views/contact",function(t,e,r){var o,n,i={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=e("lib/composite_view"),n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.template=e("templates/contact"),r.prototype.id="contact",r.prototype.addressBindings={"#street":"street","#city":{observe:"city",onGet:function(t){return t?""+t+", ":void 0}},"#state":"state","#postcode":"postcode"},r.prototype.bindings={"#age":"age","#avatar":{attributes:[{name:"src",observe:"gravatar_hash",onGet:function(t){return"http://www.gravatar.com/avatar/"+t+"?d=mm&s=256"}}]},"#birthday":{observe:"birthday",onGet:function(t){return t?moment(t).format("M / D / YYYY"):void 0}},"#email":"email","#name":"name","#phone":"phone","#sex":"sex"},r.prototype.events={"click #edit":"_editContact"},r.prototype.tooltipOptions={placement:"right",delay:{show:500,hide:100}},r.prototype.render=function(){return this.$el.html(this.template()),this.stickit(),this.stickit(this.model.get("address"),this.addressBindings),this._enableTooltips(),this},r.prototype._editContact=function(){return e("router").navigate("#/contacts/"+this.model.id+"/edit",{trigger:!0})},r.prototype._enableTooltips=function(){return this.$("[data-toggle=tooltip]").tooltip(this.tooltipOptions)},r}(o),r.exports=n}),require.register("views/contacts",function(t,e,r){var o,n,i,a,s={}.hasOwnProperty,c=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=e("views/card"),n=e("lib/composite_view"),a=e("router"),i=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return c(r,t),r.prototype.template=e("templates/contacts"),r.prototype.initialize=function(t){return r.__super__.initialize.call(this,t),this.collection=e("collections/contacts"),this.listenTo(this.collection,"sort",this._renderCollection)},r.prototype.events={"click #new":function(){return a.navigate("#/contacts/new",{trigger:!0})}},r.prototype.render=function(){return this.$el.html(this.template()),this._renderCollection(),this},r.prototype._renderCollection=function(){return this._removeChildren(),this.collection.each(function(t){return function(e){return t.$el.append(t.renderChild(new o({model:e})).el)}}(this))},r}(n),r.exports=i}),require.register("views/edit",function(t,e,r){var o,n,i={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=e("lib/composite_view"),n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.template=e("templates/edit"),r.prototype.id="contact",r.prototype.initialize=function(t){return r.__super__.initialize.call(this,t),this.collection=e("collections/contacts"),this.router=e("router"),this.model.get("address")||this.model.set({address:{}}),this.listenTo(this.model,"change",this._markDirty)},r.prototype.addressBindings={"#street":"street","#city":"city","#state":{observe:"state",selectOptions:{collection:e("lib/states"),defaultOption:{label:"State",value:null}}},"#postcode":"postcode"},r.prototype.bindings={"#avatar":{attributes:[{name:"src",observe:"gravatar_hash",onGet:function(t){return"http://www.gravatar.com/avatar/"+t+"?d=mm&s=256"}}]},"#birthday":"birthday","#delete":{attributes:[{name:"class",observe:"id",onGet:function(t){return t?"":"hidden"}}]},"#email":"email","#name":"name","#phone":"phone","#sex":{observe:"sex",selectOptions:{collection:["male","female"],defaultOption:{label:"Choose one...",value:null}}}},r.prototype.events={"click #cancel":"_cancel","click #delete":"_delete","submit form":"_saveAndShow"},r.prototype.remove=function(){return this.dirty&&(window.confirm("You have unsaved changes. Do you want to save before continuing?")?this._saveContact():this.model.undo()),r.__super__.remove.call(this)},r.prototype.render=function(){return this.$el.html(this.template()),this.stickit(),this.stickit(this.model.get("address"),this.addressBindings),Backbone.Validation.bind(this,{model:this.model}),this},r.prototype._cancel=function(){return this.model.undo(),this.dirty=!1,this.model.isNew()?this._goHome():this._show()},r.prototype._delete=function(){return window.confirm("Are you sure you want to delete this contact?")?(this.dirty=!1,this.model.destroy({success:function(t){return function(){return t._goHome()}}(this)})):void 0},r.prototype._goHome=function(){return this.router.navigate("#/contacts",{trigger:!0})},r.prototype._markDirty=function(t){return t.hasChanged("active")?void 0:this.dirty=!0},r.prototype._saveAndShow=function(t){return t.preventDefault(),this._saveContact({success:this._show})},r.prototype._saveContact=function(t){return null==t&&(t={}),this.model.isValid(!0)?this.model.save({},{nested:!0,success:function(e){return function(){var r;return e.dirty=!1,e.collection.add(e.model),e.collection.sort(),null!=(r=t.success)?r.apply(e):void 0}}(this)}):void 0},r.prototype._show=function(){return this.router.navigate("#"+this.model.url(),{trigger:!0})},r}(o),r.exports=n}),require.register("views/main",function(t,e,r){var o,n,i,a={}.hasOwnProperty,s=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};o=e("lib/composite_view"),n=e("views/contacts"),i=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return s(r,t),r.prototype.template=e("templates/main"),r.prototype.render=function(){return this.$el.html(this.template()),this._renderContacts(),this},r.prototype._renderContacts=function(){return this.renderChild(new n({el:this.$("#contacts")}))},r}(o),r.exports=new i({el:$("body")}).render()});