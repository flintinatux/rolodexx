{"version":3,"file":"public/javascripts/app.js","sources":["app/scripts/application.coffee","app/scripts/collections/contacts.coffee","app/scripts/initialize.coffee","app/scripts/lib/composite_view.coffee","app/scripts/lib/protect_from_csrf.coffee","app/scripts/lib/swapping_router.coffee","app/scripts/models/address.coffee","app/scripts/models/contact.coffee","app/scripts/router.coffee","app/scripts/session.coffee","app/scripts/templates/card.jade","app/scripts/templates/contact.jade","app/scripts/templates/contacts.jade","app/scripts/templates/main.jade","app/scripts/views/card.coffee","app/scripts/views/contact.coffee","app/scripts/views/contacts.coffee","app/scripts/views/main.coffee"],"names":[],"mappings":"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","sourcesContent":["Application =\n  initialize: ->\n    require 'lib/protect_from_csrf'\n    require 'views/main'\n    require 'router'\n\nmodule.exports = Application\n","class Contacts extends Backbone.Collection\n  url: '/contacts'\n  model: require 'models/contact'\n\nmodule.exports = new Contacts()\n","application = require 'application'\n\n$(document).ready ->\n  application.initialize()\n  Backbone.history.start pushState: false\n","class CompositeView extends Backbone.View\n  initialize: (options) ->\n    super(options)\n    @children = _([])\n\n  renderChild: (child) ->\n    @children.push child\n    child.parent = this\n    child.render()\n\n  remove: ->\n    @trigger 'remove'\n    super()\n    @_removeChildren()\n    @_removeFromParent()\n    this\n\n  swapped: ->\n    @trigger 'swapped'\n    this\n\n  _removeChild: (child) ->\n    index = @children.indexOf child\n    @children.splice index, 1\n\n  _removeChildren: ->\n    _.each @children.clone(), (child) ->\n      child.remove()\n\n  _removeFromParent: ->\n    @parent._removeChild(this) if @parent\n\nmodule.exports = CompositeView\n","session = require 'session'\n\nBackbone._sync = Backbone.sync\n\nBackbone.sync = (method, model, options) ->\n  beforeSend = options.beforeSend\n\n  # Set X-CSRF-Token HTTP header\n  options.beforeSend = (xhr) ->\n    xhr.setRequestHeader 'X-CSRF-Token', session.get('csrf_token')\n    beforeSend.apply(this, arguments) if beforeSend\n\n  Backbone._sync method, model, options\n","class SwappingRouter extends Backbone.Router\n  execute: (callback, args) ->\n    @params = @_parseParams args.pop()\n    callback?.apply this, args\n\n  navigate: (fragment, options={}) ->\n    url = new URI fragment.replace('#','')\n    url.query options.params if options.params?\n    super \"##{url.toString()}\", _.omit(options, 'params')\n\n  swap: (newView) ->\n    @currentView?.remove()\n    @currentView = newView\n    @$el.html @currentView.render().el\n    @currentView.swapped()\n    this\n\n  _parseParams: (params) ->\n    return {} unless params\n    new URI(\"?#{params}\").query(true)\n\nmodule.exports = SwappingRouter\n","class Address extends Backbone.NestedAttributesModel\n\nmodule.exports = Address\n","Address = require 'models/address'\n\nclass Contact extends Backbone.NestedAttributesModel\n  urlRoot: '/contacts'\n\n  relations: [\n    {\n      type: 'one'\n      key:  'address'\n      relatedModel: -> Address\n    }\n  ]\n\n  choose: ->\n    @collection.each (contact) -> contact.set active: false\n    @set active: true\n\nmodule.exports = Contact\n","Contact = require 'models/contact'\nContactView = require 'views/contact'\nSwappingRouter = require 'lib/swapping_router'\ncontacts = require 'collections/contacts'\n\nclass Router extends SwappingRouter\n  execute: (callback, args) ->\n    @$el = $('#contact_wrapper')\n    if contacts.isEmpty()\n      contacts.fetch success: => super callback, args\n    else\n      super callback, args\n\n  routes:\n    '': 'home'\n    'contacts': 'first'\n    'contacts/new': 'new_contact'\n    'contacts/:id': 'show'\n    'contacts/:id/edit': 'edit'\n\n  edit: (id) ->\n\n  first: ->\n    @_show contacts.first()\n\n  home: ->\n    @navigate '#/contacts', trigger: true, params: @params\n\n  new_contact: ->\n\n  show: (id) ->\n    @_show contacts.get(id)\n\n  _show: (model) ->\n    model.choose()\n    @swap new ContactView model: model, params: @params\n\nmodule.exports = new Router()\n","class Session extends Backbone.Model\n  url: '/session'\n\nsession = new Session()\nsession.fetch()\nmodule.exports = session\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<span id=\\\"arrow\\\"><i class=\\\"fa fa-chevron-right\\\"></i></span><img id=\\\"avatar\\\" width=\\\"32\\\" height=\\\"32\\\"/><span id=\\\"name\\\"></span>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div class=\\\"page-header\\\"><h1><span id=\\\"name\\\"></span><span id=\\\"edit\\\" data-toggle=\\\"tooltip\\\" title=\\\"Edit contact\\\"><i class=\\\"fa fa-pencil\\\"></i></span></h1></div><div class=\\\"row\\\"><div class=\\\"col-xs-4\\\"><img id=\\\"avatar\\\"/></div><div class=\\\"col-xs-8\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-4\\\"><p class=\\\"contact-label\\\">Sex</p><p id=\\\"sex\\\"></p></div><div class=\\\"col-xs-4\\\"><p class=\\\"contact-label\\\">Age</p><p id=\\\"age\\\"></p></div><div class=\\\"col-xs-4\\\"><p class=\\\"contact-label\\\">Birthday</p><p id=\\\"birthday\\\"></p></div></div><div class=\\\"row\\\"><div class=\\\"col-xs-12\\\"><p class=\\\"contact-label\\\">Address</p><p><span id=\\\"street\\\"></span><br/><span id=\\\"city\\\"></span>,&nbsp;<span id=\\\"state\\\"></span>&nbsp;&nbsp;<span id=\\\"postcode\\\"></span></p></div></div><div class=\\\"row\\\"><div class=\\\"col-xs-4\\\"><p class=\\\"contact-label\\\">Phone</p><p id=\\\"phone\\\"></p></div><div class=\\\"col-xs-8\\\"><p class=\\\"contact-label\\\">Email</p><p id=\\\"email\\\"></p></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"new_contact_wrapper\\\"><button id=\\\"new\\\" class=\\\"btn btn-success btn-block\\\"><i class=\\\"fa fa-plus\\\"></i> Create new contact</button></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<nav class=\\\"navbar navbar-default navbar-static-top\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><a href=\\\"/\\\" class=\\\"navbar-brand\\\"><i class=\\\"fa fa-sort-alpha-asc\\\"></i> The Rolodexx</a></div><p class=\\\"navbar-text navbar-right\\\">The way your grandma used to remember things.</p></div></nav><div id=\\\"content\\\" class=\\\"container-fluid\\\"><div class=\\\"row\\\"><div id=\\\"contacts\\\" class=\\\"col-xs-3\\\"></div><div id=\\\"contact_wrapper\\\" class=\\\"col-xs-9\\\"></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","CompositeView = require 'lib/composite_view'\nrouter = require 'router'\n\nclass Card extends CompositeView\n  template: require 'templates/card'\n  className: 'card'\n\n  bindings:\n    ':el':\n      attributes: [\n        name: 'class'\n        observe: 'active'\n        onGet: (val) -> if val then 'active' else ''\n      ]\n    '#avatar':\n      attributes: [\n        name: 'src'\n        observe: 'gravatar_hash'\n        onGet: (val) -> \"http://www.gravatar.com/avatar/#{val}?d=mm&s=32\"\n      ]\n    '#name': 'name'\n\n  events:\n    'click': '_showContact'\n\n  render: ->\n    @$el.html @template()\n    @stickit()\n    this\n\n  _showContact: ->\n    router.navigate \"#/contacts/#{@model.id}\", trigger: true\n\nmodule.exports = Card\n","CompositeView = require 'lib/composite_view'\n\nclass ContactView extends CompositeView\n  template: require 'templates/contact'\n  id: 'contact'\n\n  addressBindings:\n    '#street':    'street'\n    '#city':      'city'\n    '#state':     'state'\n    '#postcode':  'postcode'\n\n  bindings:\n    '#age': 'age'\n    '#avatar':\n      attributes: [\n        name: 'src'\n        observe: 'gravatar_hash'\n        onGet: (val) -> \"http://www.gravatar.com/avatar/#{val}?d=mm&s=256\"\n      ]\n    '#birthday':\n      observe: 'birthday'\n      onGet: (val) -> if val then moment(val).format('M / D / YYYY')\n    '#email': 'email'\n    '#name':  'name'\n    '#phone': 'phone'\n    '#sex':   'sex'\n\n  events:\n    'click #edit': '_editContact'\n\n  tooltipOptions:\n    placement: 'right'\n    delay:\n      show: 500\n      hide: 100\n\n  render: ->\n    @$el.html @template()\n    @stickit()\n    @stickit @model.get('address'), @addressBindings\n    @_enableTooltips()\n    this\n\n  _editContact: ->\n    require('router').navigate \"#/contacts/#{@model.id}/edit\", trigger: true\n\n  _enableTooltips: ->\n    @$('[data-toggle=tooltip]').tooltip @tooltipOptions\n\nmodule.exports = ContactView\n","Card = require 'views/card'\nCompositeView = require 'lib/composite_view'\nrouter = require 'router'\n\nclass ContactsView extends CompositeView\n  template: require 'templates/contacts'\n\n  initialize: (options) ->\n    super options\n    @collection = require 'collections/contacts'\n    @listenTo @collection, 'sort', @_renderCollection\n\n  events:\n    'click #new': -> router.navigate '#/contacts/new', trigger: true\n\n  render: ->\n    @$el.html @template()\n    @_renderCollection()\n    this\n\n  _renderCollection: ->\n    @_removeChildren()\n    @collection.each (model) =>\n      @$el.append @renderChild(new Card model: model).el\n\nmodule.exports = ContactsView\n","CompositeView = require 'lib/composite_view'\nContactsView  = require 'views/contacts'\n\nclass Main extends CompositeView\n  template: require 'templates/main'\n\n  render: ->\n    @$el.html @template()\n    @_renderContacts()\n    this\n\n  _renderContacts: ->\n    @renderChild new ContactsView el: @$('#contacts')\n\nmodule.exports = new Main(el: $('body')).render()\n"]}